/*!
 * react-lite.js v0.0.2
 * (c) 2015 Jade Gu
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.React=e()}(this,function(){"use strict";function t(t){this.instant=t,this.pendingStates=[],this.pendingCallbacks=[],this.isPendingForceUpdate=!1}function e(e){this.$updater=new t(this),this.$cache={},this.props=e,this.state={},this.refs={},this.$id=C()}function n(t){E(this,t)}function r(t){this.text=t}function i(t,e,n){this.type=t,this.props=e,this.children=n}function o(t,e,n){this.type=t,this.props=e,this.children=n}function a(t,e,n){this.type=t,this.props=e,this.children=n}var s=function(t){return function(e){return null!=e&&Object.prototype.toString.call(e)==="[object "+t+"]"}},c=s("Object"),u=s("String"),p=(s("Number"),s("Function")),f=s("Boolean"),h=Array.isArray||s("Array"),d=function(t){return void 0===t},l=function(t){return t&&t.prototype&&"forceUpdate"in t.prototype},v=function(t){return t&&(!t.prototype||!("forceUpdate"in t.prototype))},y=function(t,e){return function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return t.apply(this,r),e.apply(this,r)}},m=function At(t,e){for(var n=arguments.length<=2||void 0===arguments[2]?{index:0}:arguments[2],r=0,i=t.length;i>r;r+=1){var o=t[r];h(o)?At(o,e,n):d(o)||(e(o,n.index),n.index+=1)}},T=function(t,e){for(var n=0,r=t.length;r>n;n+=1)e(t[n],n)},g=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},E=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return T(n,function(e){null!=e&&g(e,function(e,n){t[n]=e})}),t},b=0,C=function(){return++b},k=function(t){var e=arguments.length<=1||void 0===arguments[1]?"key":arguments[1];return t&&t.props&&t.props.hasOwnProperty(e)},O=function(t,e,n){var r=E({},n,t);return e&&e.length>0&&(r.children=1===e.length?e[0]:e),r},P=function(t,e,n){t.setAttribute(e,n)},R=function(t,e){return t.getAttribute(e)},N=function(t,e){t.removeAttribute(e)},w=function(t,e,n){p(n)&&(e=e.toLowerCase(),t[e]=n,"onchange"===e&&(t.oninput=n))},S=function(t,e){e=e.toLowerCase(),t[e]=null,"onchange"===e&&(t.oninput=null)},M=/(key)|(ref)/i,U=/^on/i,A=function(t){return M.test(t)},x=function(t){return U.test(t)},L=function(t){return"dangerouslySetInnerHTML"===t},D=function(t){return"style"===t},W=function(t,e,n){switch(!0){case A(e):break;case x(e):w(t,e,n);break;case D(e):I(t,n);break;case L(e):n&&u(n.__html)&&(t.innerHTML=n.__html);break;case e in t:t[e]=n;break;default:t.setAttribute(e,n)}},$=function(t,e){g(e,function(e,n){W(t,n,e)})},_=function(t,e){g(e,function(e,n){F(t,n,e)})},F=function(t,e,n){switch(!0){case A(e):break;case x(e):S(t,e);break;case D(e):j(t.style,n);break;case L(e):t.innerHTML="";break;case!(e in t):N(t,e);break;case p(n):t[e]=null;break;case u(n):t[e]="";break;case f(n):t[e]=!1;break;default:try{t[e]=null}catch(r){}}},H=function(t,e,n){if(e!==n){if(!e&&n)return void $(t,n);if(!n&&e)return void _(t,e);g(n,function(n,r){if(!A(r)){var i=d(n);if(!e.hasOwnProperty(r)&&!i)return void W(t,r,n);var o=e[r];if(delete e[r],n!==o){if(i)return void F(t,r,o);if(D(r))z(t,o,n);else if(L(r)){var a=o&&o.__html,s=n&&n.__html;u(s)?s!==a&&(t.innerHTML=s):t.innerHTML=""}else W(t,r,n)}}}),_(t,e)}},j=function(t,e){var n=t.style;g(e,function(t,e){n[e]=""})},I=function(t,e){var n=t.style;g(e,function(t,e){B(n,e,t)})},z=function(t,e,n){if(e!==n)if(!n&&e)j(t,e);else if(n&&!e)I(t,n);else{var r=t.style;g(n,function(t,n){if(null==t)r[n]="";else{var i=void 0;e.hasOwnProperty(n)&&(i=e[n],delete e[n]),t!==i&&B(r,n,t)}}),j(r,e)}},G={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},V=function(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)},X=["Webkit","ms","Moz","O"];g(G,function(t,e){T(X,function(t){return G[V(t,e)]=!0})});var q=/^-?\d+(\.\d+)?$/,B=function(t,e,n){!G[e]&&q.test(n)?t[e]=n+"px":t[e]=n},J={ELEMENT:1,COMPONENT:2,STATELESS_COMPONENT:3,TEXT:4},K={CREATE:1,REMOVE:2,REPLACE:3,UPDATE:4},Q="data-liteid",Y={},Z=function(t,e,n){if(!t)throw new Error("cannot render "+t+" to container");var r=R(e,Q);Y.hasOwnProperty(r)?Y[r].updateTree(t,e):(P(e,Q,r=C()),e.innerHTML="",t.initTree(e)),Y[r]=t;var i=void 0;switch(t.vtype){case J.ELEMENT:i=e.firstChild;break;case J.COMPONENT:i=t.component;break;default:i=null}return p(n)&&n.call(i),i},tt=function(t){var e=R(t,Q);return Y.hasOwnProperty(e)?(Y[e].destroyTree(t),delete Y[e],!0):!1},et=function(t){return t.nodeName?t:t.getDOMNode()};t.prototype={constructor:t,emitUpdate:function(t){var e=this.instant,n=this.pendingStates;this.pendingCallbacks;if(t||n.length>0){var r=t||e.props;rt(e,r,this.getState(),this.clearCallbacks.bind(this))}},addState:function(t){t&&(this.pendingStates.push(t),this.isPendingForceUpdate||this.emitUpdate())},replaceState:function(t){var e=this.pendingStates;e.pop(),e.push(t)},getState:function(){var t=this.instant,e=this.pendingStates,n=t.state,r=t.props;return T(e,function(e){p(e)&&(e=e.call(t,n,r)),n=E({},n,e)}),e.length=0,n},clearCallbacks:function(){var t=this.pendingCallbacks,e=this.instant;t.length>0&&(T(t,function(t){return t.call(e)}),t.length=0)},addCallback:function(t){p(t)&&this.pendingCallbacks.push(t)}},e.prototype={constructor:e,componentWillUpdate:function(t,e){},componentDidUpdate:function(t,e){},componentWillReceiveProps:function(t){},componentWillMount:function(){},componentDidMount:function(){},componentWillUnmount:function(){},shouldComponentUpdate:function(t,e){return!0},forceUpdate:function(t){var e=this.$cache,n=this.props,r=this.state,i=this.vtree,o=this.node,a=(this.refs,e.props||n),s=e.state||r;e.props=e.state=null,this.componentWillUpdate(a,s),this.props=a,this.state=s;var c=ht(this);i.updateTree(c,o&&o.parentNode),this.vtree=c,this.componentDidUpdate(n,r),p(t)&&t.call(this)},setState:function(t,e){var n=this.$updater;n.addCallback(e),n.addState(t)},replaceState:function(t,e){var n=this.$updater;n.addCallback(e),n.replaceState(t)},getDOMNode:function(){var t=this.vtree.node;return"NOSCRIPT"===t.tagName?null:t}};var nt=function(t,e,n){t.state=n,t.props=e},rt=function xt(t,e,n,r){var xt=(t.$cache,t.shouldComponentUpdate(e,n));return xt===!1?void nt(t,e,n):(nt(t.$cache,e,n),void t.forceUpdate(r))},it=function(t,e){var n=void 0;switch(!0){case t===e:return null;case d(e):n=K.REMOVE;break;case d(t):n=K.CREATE;break;case t.type!==e.type:n=K.REPLACE;break;case k(e):n=k(t)&&e.props.key===t.props.key?K.UPDATE:K.REPLACE;break;case k(t):n=K.REPLACE;break;default:n=K.UPDATE}return n},ot=function(){},at=function(){return this};n.prototype={constructor:n,mapTree:ot,eachChildren:ot,attachRef:function(){var t=this.props,e=this.refs,n=this.vtype;if(e){var r=void 0,i=void 0;n===J.ELEMENT?(i=this.node,i.getDOMNode=at):n===J.COMPONENT&&(i=this.component),i&&e&&t&&t.ref&&(r=t.ref,p(r)?r(i):u(r)&&(e[r]=i))}},detachRef:function(){var t=this.props,e=this.refs;this.vtype;if(e){e&&t&&t.ref&&(p(t.ref)?t.ref(null):delete e[t.ref])}},updateRef:function(t){if(!this.refs)return void t.attachRef();if(!t.refs)return void this.detachRef();if(this.refs!==t.refs)return this.detachRef(),void t.attachRef();var e=this.props,n=t.props,r=e&&e.ref,i=n&&n.ref;d(i)?this.detachRef():r!==i&&(this.detachRef(),t.attachRef())},updateTree:function(t,e){lt(this,t,e)}},r.prototype=new n({constructor:r,vtype:J.TEXT,attachRef:ot,detachRef:ot,updateRef:ot,update:function(t){var e=this.node,n=this.text;return t.text!==n&&e.replaceData(0,e.length,t.text),t.node=this.node,this},initTree:function(t){this.node=Tt(this.text),yt(t,this.node)},destroyTree:function(){vt(this.node)}});var st=function(t){var e=t.vtype;return e===J.COMPONENT||e===J.STATELESS_COMPONENT?void t.destroyTree():void t.detachRef()},ct=function(t){return t.destroyTree()};i.prototype=new n({constructor:i,vtype:J.ELEMENT,eachChildren:function(t){var e=this.children,n=this.sorted;if(n)return void T(e,t);if(e&&e.length>0){var r=[];m(e,function(e,n){e=Et(e),t(e,n),r.push(e)}),this.children=r,this.sorted=!0}},mapTree:function(t){t(this),this.eachChildren(function(e){return e.mapTree(t)})},initTree:function(t){var e=this.type,n=this.props,r=this.node=gt(e,n);this.eachChildren(function(t){t.initTree(r)}),yt(t,r),this.attachRef()},destroyTree:function(){var t=this.node;this.props;this.mapTree(st),vt(t)},update:function(t){var e=this.node,n=this.props,r=this.children||[];H(e,n,t.props),t.node=e,t.eachChildren(function(t,n){var i=r[n];i?i.updateTree(t,e):t.initTree(e)});var i=t.children&&t.children.length?t.children.length:0;r.length>i&&T(r.slice(i),ct),this.updateRef(t)}}),o.prototype=new n({constructor:o,vtype:J.STATELESS_COMPONENT,attachRef:ot,detachRef:ot,updateRef:ot,mapTree:function(t){t(this)},renderTree:function(){var t=this.type,e=O(this.props,this.children,t.defaultProps),n=t(e);n&&p(n.render)&&(n=n.render()),this.vtree=Et(n)},initTree:function(t){this.renderTree(),this.vtree.initTree(t),this.node=this.vtree.node},destroyTree:function(){this.vtree.destroyTree(),this.node=this.vtree=null},update:function(t,e){var n=this.vtree;t.renderTree(),n.updateTree(t.vtree,e)}});var ut=ot,pt=function(t){ut(t)},ft=function(t){return function(e){e.refs||(e.refs=t)}},ht=function(t){ut=ft(t.refs);var e=bt(t.render());return ut=ot,e},dt=function(){return!1};a.prototype=new n({constructor:a,vtype:J.COMPONENT,mapTree:function(t){t(this)},initTree:function(t){var e=this.type,n=O(this.props,this.children,e.defaultProps),r=this.component=new e(n),i=r.$updater;i.isPendingForceUpdate=!0,r.props=r.props||n,r.componentWillMount();var o=i.getState();o!==r.state&&nt(r,r.props,o);var a=ht(r);r.vtree=a,a.initTree(t),r.node=this.node=a.node,r.componentDidMount(),i.isPendingForceUpdate=!1,this.attachRef(),i.emitUpdate()},destroyTree:function(){var t=this.component;this.props;t.shouldComponentUpdate=dt,t.forceUpdate=ot,t.componentWillUnmount(),this.detachRef(),t.vtree.destroyTree(),this.component=this.node=t.node=t.refs=null},update:function(t,e){var n=this.component;if(n){var r=t.type,i=t.props,o=t.children,a=O(i,o,r.defaultProps),s=n.$updater;t.component=n,s.isPendingForceUpdate=!0,n.componentWillReceiveProps(a),s.isPendingForceUpdate=!1,s.emitUpdate(a),this.updateRef(t)}}});var lt=function(t,e,n){var r=it(t,e);switch(r){case K.CREATE:e.initTree(n);break;case K.REMOVE:t.destroyTree();break;case K.REPLACE:e.initTree(function(e){mt(n,e,t.node)}),t.destroyTree();break;case K.UPDATE:t.update(e,n)}},vt=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},yt=function(t,e){t&&e&&(p(t)?t(e):t.appendChild(e))},mt=function(t,e,n){e&&n&&(t=t||n.parentNode,t.replaceChild(e,n))},Tt=function(t){return document.createTextNode(t)},gt=function(t,e){var n=document.createElement(t);return e&&$(n,e),n},Et=function(t){return null===t||t===!1?t=new i("noscript"):c(t)||(t=new r(t)),t},bt=function(t){if(d(t))throw new Error("component can not render undefined");return Et(t)},Ct=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;n>s;s++)r[s-2]=arguments[s];var c=void 0;switch(!0){case u(t):c=i;break;case l(t):c=a;break;case v(t):c=o;break;default:throw new Error("React.createElement: unexpect type "+t)}0===r.length&&(r=void 0);var p=new c(t,e,r);return k(p,"ref")&&c!==o&&pt(p),p},kt=function(t,e){g(e,function(e,n){var r=t[n];p(r)&&p(e)?t[n]=y(r,e):t[n]=e})},Ot=function(t,e){T(e,function(e){return kt(t,e)})},Pt=function(t,e){g(e,function(e,n){p(e)&&(t[n]=e.bind(t))})},Rt=function(){};Rt.prototype=e.prototype;var Nt=function(t){function n(t){e.call(this,t),Pt(this,n.prototype),p(this.getInitialState)&&(this.state=this.getInitialState())}var r=t.mixins||[];return n.prototype=new Rt,Ot(n.prototype,r.concat(t)),c(t.statics)&&g(t.statics,function(t,e){n[e]=t}),p(t.getDefaultProps)&&(n.defaultProps=t.getDefaultProps()),n},wt=function Lt(){return Lt};wt.isRequired=wt;var St={array:wt,bool:wt,func:wt,number:wt,object:wt,string:wt,any:wt,arrayOf:wt,element:wt,instanceOf:wt,node:wt,objectOf:wt,oneOf:wt,oneOfType:wt,shape:wt},Mt={only:function(t){return t}},Ut={Component:e,createClass:Nt,createElement:Ct,Children:Mt,PropTypes:St,render:Z,findDOMNode:et,unmountComponentAtNode:tt};return Ut});